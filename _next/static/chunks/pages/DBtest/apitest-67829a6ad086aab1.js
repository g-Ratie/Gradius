(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[540],{8471:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DBtest/apitest",function(){return l(5768)}])},5768:function(e,n,l){"use strict";l.r(n);var s=l(5893),i=l(24),t=l(7294),r=l(8239),d=l(1290),c=l(5371);let a=()=>{let[e]=(0,i.KO)(c.L),[n,l]=(0,t.useState)(null),[a,h]=(0,t.useState)(null),o=async()=>{let e=await d.x.game.session.$get();l(e)},u=async()=>{if(!e)return;let n=await d.x.game.session.$post({body:{playerId:e.id,stageId:"debug"}});l(n)},x=async()=>{e&&await d.x.game.session.score.$post({body:{playerId:e.id,score:100}})},j=async n=>{if(!e||!a||!["up","down","left","right"].includes(n))return;let l=await d.x.game.player.move.$post({body:{player:a,MoveInput:n}});h(l)},p=async()=>{if(!e)return;let n=await d.x.game.player.$post({body:{userid:e.id,username:"test"}});h(n)};return((0,t.useEffect)(()=>{let n=async()=>{if(!e)return;let n=await d.x.game.player.$get();h(n)},l=setInterval(()=>{n()},1e3);return()=>clearInterval(l)},[e]),(0,t.useEffect)(()=>{let e=setInterval(()=>{o()},1e3);return()=>clearInterval(e)},[]),e)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsxs)("div",{style:{marginRight:"20px"},children:[(0,s.jsx)("h2",{children:"Gamesession"}),(0,s.jsx)("button",{onClick:u,children:"セッション作る"}),(0,s.jsx)("button",{onClick:x,children:"スコア加算"})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("h3",{children:"ゲームセッションID"}),(0,s.jsx)("p",{children:null==n?void 0:n.id}),(0,s.jsx)("h3",{children:"プレイヤーID"}),(0,s.jsx)("p",{children:null==n?void 0:n.playerId}),(0,s.jsx)("h3",{children:"ステージID"}),(0,s.jsx)("p",{children:null==n?void 0:n.stageId}),(0,s.jsx)("h3",{children:"スコア"}),(0,s.jsx)("p",{children:null==n?void 0:n.score}),(0,s.jsx)("h3",{children:"開始時刻"}),(0,s.jsx)("p",{children:null==n?void 0:n.startTime})]})]}),(0,s.jsx)("br",{}),(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsxs)("div",{style:{marginRight:"20px"},children:[(0,s.jsx)("h2",{children:"Player"}),(0,s.jsx)("button",{onClick:p,children:"作成"}),(0,s.jsx)("button",{onClick:()=>j("up"),children:"動かす(上)"}),(0,s.jsx)("button",{onClick:()=>j("down"),children:"動かす(下)"}),(0,s.jsx)("button",{onClick:()=>j("left"),children:"動かす(左)"}),(0,s.jsx)("button",{onClick:()=>j("right"),children:"動かす(右)"})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("h3",{children:"プレイヤーID"}),(0,s.jsx)("p",{children:null==a?void 0:a.id}),(0,s.jsx)("h3",{children:"プレイヤー名"}),(0,s.jsx)("p",{children:null==a?void 0:a.name}),(0,s.jsx)("h3",{children:"プレイヤーのX座標"}),(0,s.jsx)("p",{children:null==a?void 0:a.x}),(0,s.jsx)("h3",{children:"プレイヤーのY座標"}),(0,s.jsx)("p",{children:null==a?void 0:a.y})]})]})," "]}):(0,s.jsx)(r.g,{visible:!0})};n.default=a}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8471)}),_N_E=e.O()}]);