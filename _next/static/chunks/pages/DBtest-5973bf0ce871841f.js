(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{8543:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DBtest",function(){return s(2184)}])},2184:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var n=s(5893),r=s(24),l=s(8239),a=s(5371),i=s(7294),u=s(2237),c=s(1290);let o=()=>{let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)(500),[l,a]=(0,i.useState)(300),[o,d]=(0,i.useState)([]),[f,x]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=async()=>{let e={EnemyPos:{x:s,y:l},radius:75},t=await c.x.enemy.$post({body:e});r(t.EnemyPos.x),a(t.EnemyPos.y);let n=[...o,e];d(n)},t=setInterval(e,1e4);return()=>{clearInterval(t)}},[s,l,o]),(0,i.useEffect)(()=>{let e=()=>{let e=f.map(e=>({...e,x:e.x+e.speed}));x(e)},t=requestAnimationFrame(e);return()=>{cancelAnimationFrame(t)}},[f]),(0,i.useEffect)(()=>{let e=function(e,t){for(let s=0;s<e.length;s++)for(let n=0;n<t.length;n++){let r=e[s].x-t[n].EnemyPos.x,l=e[s].y-t[n].EnemyPos.y,a=Math.sqrt(r*r+l*l);if(a<e[s].radius+t[n].radius-10)return e.splice(s,1),t.splice(n,1),console.log("hit",e.splice(s,1),t.splice(n,1)),{Bullets:e,Enemys:t}}return{Bullets:e,Enemys:t}}(f,o);x(e.Bullets),d(e.Enemys)},[f,o]),(0,i.useEffect)(()=>{let e=async()=>{let e=await c.x.game.player.$get();e&&t(t=>{let s=t.map(t=>t.id===e.id?{...t,x:e.x,y:e.y}:t);return s.some(t=>t.id===e.id)?s:[...s,e]})},s=setInterval(e,10);return()=>{clearInterval(s)}},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.Hf,{width:1e3,height:1e3,stroke:"black",children:(0,n.jsxs)(u.mh,{children:[e.map((e,t)=>(0,n.jsx)(u.Cd,{x:e.x,y:e.y,stroke:"black",fill:"blue",radius:100},t)),o.map((e,t)=>(0,n.jsx)(u.Cd,{x:e.EnemyPos.x,y:e.EnemyPos.y,stroke:"black",fill:"red",radius:e.radius},t)),f.map((e,t)=>(0,n.jsx)(u.Cd,{x:e.x,y:e.y,stroke:"black",fill:"green",radius:e.radius},t))]})})})},d=()=>{let[e]=(0,r.KO)(a.L);return e?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o,{})}):(0,n.jsx)(l.g,{visible:!0})};var f=d}},function(e){e.O(0,[237,774,888,179],function(){return e(e.s=8543)}),_N_E=e.O()}]);